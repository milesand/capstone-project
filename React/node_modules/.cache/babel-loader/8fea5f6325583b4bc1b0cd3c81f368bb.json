{"ast":null,"code":"import _defineProperty from \"/home/hong/PRTest/capstone-project/React/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/hong/PRTest/capstone-project/React/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/hong/PRTest/capstone-project/React/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/hong/PRTest/capstone-project/React/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/hong/PRTest/capstone-project/React/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/hong/PRTest/capstone-project/React/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/hong/PRTest/capstone-project/React/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/hong/PRTest/capstone-project/React/src/containers/ForgotPassword.js\";\nimport React, { Component } from 'react';\nimport ForgotPasswordForm from \"../components/LoginComponents/ForgotPasswordForm\";\n\nvar ForgotPassword =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ForgotPassword, _Component);\n\n  function ForgotPassword(props) {\n    var _this;\n\n    _classCallCheck(this, ForgotPassword);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ForgotPassword).call(this, props));\n    console.log('this test.');\n    _this.state = {\n      username: \"\",\n      email: \"\"\n    };\n    _this.sendPassword = _this.sendPassword.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  } //유저 로그인 상태 체크\n\n\n  _createClass(ForgotPassword, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.isLogin) {\n        this.props.history.push(\"/\");\n      }\n    }\n  }, {\n    key: \"sendPassword\",\n    value: function sendPassword(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      var emailData = {\n        Idorpassword: 'password',\n        username: this.state.username,\n        email: this.state.email\n      };\n      fetch(\"http://localhost/api/forgot\", {\n        method: \"POST\",\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify(emailData)\n      }).then(function (res) {\n        return res.json();\n      }).then(function (content) {\n        console.log(content);\n        if (content.hasOwnProperty('error')) throw Error(content['이메일 또는 닉네임이 올바르지 않습니다.']);else _this2.props.history.push('/password-resend', {\n          username: content.username,\n          email: _this2.email\n        }); //redirect? push 대신 replace?\n      }).catch(function (error) {\n        return alert(error);\n      });\n    }\n  }, {\n    key: \"valChangeControl\",\n    value: function valChangeControl(e) {\n      var target_id = e.target.id;\n      var target_val = e.target.value;\n      console.log(\"changeControl!\");\n      this.setState(_defineProperty({}, target_id, target_val));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      console.log(\"forgot password test.\");\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(ForgotPasswordForm, {\n        email: this.state.email,\n        username: this.state.username,\n        changeEmail: function changeEmail(e) {\n          return _this3.valChangeControl(e);\n        },\n        changeUsername: function changeUsername(e) {\n          return _this3.valChangeControl(e);\n        },\n        sendPassword: function sendPassword(e) {\n          return _this3.sendPassword(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return ForgotPassword;\n}(Component);\n\nexport { ForgotPassword as default };","map":{"version":3,"sources":["/home/hong/PRTest/capstone-project/React/src/containers/ForgotPassword.js"],"names":["React","Component","ForgotPasswordForm","ForgotPassword","props","console","log","state","username","email","sendPassword","bind","isLogin","history","push","e","preventDefault","emailData","Idorpassword","fetch","method","headers","credentials","body","JSON","stringify","then","res","json","content","hasOwnProperty","Error","catch","error","alert","target_id","target","id","target_val","value","setState","valChangeControl"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport ForgotPasswordForm from \"../components/LoginComponents/ForgotPasswordForm\";\n\nexport default class ForgotPassword extends Component{\n    constructor(props){\n        super(props);\n        console.log('this test.');\n        this.state = {\n            username : \"\",\n            email : \"\"\n        };\n        this.sendPassword=this.sendPassword.bind(this);\n    }\n\n     //유저 로그인 상태 체크\n    componentDidMount() {\n    if (this.props.isLogin) {\n      this.props.history.push(\"/\");\n    }\n  }\n\n    \n    sendPassword(e) {\n        e.preventDefault();\n    \n\n        let emailData={\n            Idorpassword:'password',\n            username:this.state.username,\n            email: this.state.email\n        }\n    \n        fetch(\"http://localhost/api/forgot\", {\n          method: \"POST\",\n          headers: {\n            'Content-Type' : 'application/json',\n          },\n          credentials: 'include',\n          body: JSON.stringify(emailData)\n        })\n        .then(res=>res.json())\n        .then(content => {\n            console.log(content);\n            if(content.hasOwnProperty('error'))\n                throw Error(content['이메일 또는 닉네임이 올바르지 않습니다.']);\n            else\n              this.props.history.push('/password-resend',{username: content.username, email: this.email});\n              //redirect? push 대신 replace?\n        }).catch(error=>alert(error));\n      }\n\n      valChangeControl(e){\n        let target_id=e.target.id;\n        let target_val=e.target.value;\n        console.log(\"changeControl!\");\n        this.setState({\n          [target_id]: target_val\n        });\n      }\n \n\n    render(){\n        console.log(\"forgot password test.\");\n\n        return(      \n            <div>\n                <ForgotPasswordForm\n                email={this.state.email}\n                username = {this.state.username}\n                changeEmail={e => this.valChangeControl(e)}\n                changeUsername={e => this.valChangeControl(e)}\n                sendPassword = {e => this.sendPassword(e)}\n                />\n            </div>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}
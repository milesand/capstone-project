{"ast":null,"code":"import _classCallCheck from \"/home/hong/PRTest/capstone-project/React/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/hong/PRTest/capstone-project/React/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/hong/PRTest/capstone-project/React/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/hong/PRTest/capstone-project/React/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/hong/PRTest/capstone-project/React/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/hong/PRTest/capstone-project/React/src/containers/DownloadTest.js\";\nimport React, { Component, Fragment } from \"react\";\nimport DownloadTestForm from \"../components/LoginComponents/DownloadTestForm\";\nimport streamSaver from 'streamsaver'; //로그인\n\nvar DownloadTest =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(DownloadTest, _Component);\n\n  //export default : 다른 모듈에서 이 모듈을 import할 때 내보낼 대표 값\n  function DownloadTest(props) {\n    var _this;\n\n    _classCallCheck(this, DownloadTest);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DownloadTest).call(this, props));\n    _this.state = {\n      username: \"\",\n      password: \"\"\n    };\n    console.log(\"다운로드 테스트.\");\n    return _this;\n  } //유저 로그인 상태 체크\n\n\n  _createClass(DownloadTest, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"DLTest\",\n    value: function DLTest() {\n      var fileStream = streamSaver.createWriteStream('eng.pdf');\n      fetch('http://localhost/api/download/sunga201/eng.pdf', {\n        method: \"GET\"\n      }).then(function (r) {\n        console.log(r);\n        return r;\n      }).then(function (res) {\n        var readableStream = res.body;\n        console.log(\"start!!!\");\n        console.log('readableStream : ', readableStream);\n        console.log(window.WritableStream);\n        console.log(readableStream.pipeTo);\n\n        if (window.WritableStream && readableStream.pipeTo) {\n          return readableStream.pipeTo(fileStream).then(function () {\n            return console.log(\"finish writing.\");\n          });\n        }\n\n        var writer = fileStream.getWriter();\n        var reader = readableStream.getReader();\n        console.log('here.');\n\n        var pump = function pump() {\n          return reader.read().then(function (res) {\n            return res.done ? writer.close() : writer.write(res.value).then(pump);\n          });\n        };\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      console.log('download button render.');\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(DownloadTestForm, {\n        downloadTest: this.DLTest,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return DownloadTest;\n}(Component);\n\nexport { DownloadTest as default };","map":{"version":3,"sources":["/home/hong/PRTest/capstone-project/React/src/containers/DownloadTest.js"],"names":["React","Component","Fragment","DownloadTestForm","streamSaver","DownloadTest","props","state","username","password","console","log","fileStream","createWriteStream","fetch","method","then","r","res","readableStream","body","window","WritableStream","pipeTo","writer","getWriter","reader","getReader","pump","read","done","close","write","value","DLTest"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,gBAAP,MAA6B,gDAA7B;AACA,OAAOC,WAAP,MAAwB,aAAxB,C,CAEA;;IACqBC,Y;;;;;AAAiC;AACpD,wBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,sFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACXC,MAAAA,QAAQ,EAAE,EADC;AAEXC,MAAAA,QAAQ,EAAE;AAFC,KAAb;AAIAC,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AANiB;AAOlB,G,CAED;;;;;wCACoB,CAEnB;;;6BAEO;AACN,UAAMC,UAAU,GAACR,WAAW,CAACS,iBAAZ,CAA8B,SAA9B,CAAjB;AACAC,MAAAA,KAAK,CAAC,gDAAD,EAAmD;AACpDC,QAAAA,MAAM,EAAE;AAD4C,OAAnD,CAAL,CAGCC,IAHD,CAGM,UAAAC,CAAC,EAAE;AACLP,QAAAA,OAAO,CAACC,GAAR,CAAYM,CAAZ;AACA,eAAOA,CAAP;AACH,OAND,EAOCD,IAPD,CAOM,UAAAE,GAAG,EAAE;AACP,YAAMC,cAAc,GAACD,GAAG,CAACE,IAAzB;AACAV,QAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCQ,cAAjC;AACAT,QAAAA,OAAO,CAACC,GAAR,CAAYU,MAAM,CAACC,cAAnB;AACAZ,QAAAA,OAAO,CAACC,GAAR,CAAYQ,cAAc,CAACI,MAA3B;;AACA,YAAGF,MAAM,CAACC,cAAP,IAAyBH,cAAc,CAACI,MAA3C,EAAkD;AAC9C,iBAAOJ,cAAc,CAACI,MAAf,CAAsBX,UAAtB,EACNI,IADM,CACD;AAAA,mBAAIN,OAAO,CAACC,GAAR,CAAY,iBAAZ,CAAJ;AAAA,WADC,CAAP;AAEH;;AAED,YAAMa,MAAM,GAACZ,UAAU,CAACa,SAAX,EAAb;AACA,YAAMC,MAAM,GAACP,cAAc,CAACQ,SAAf,EAAb;AACAjB,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;;AACA,YAAMiB,IAAI,GAAG,SAAPA,IAAO;AAAA,iBAAMF,MAAM,CAACG,IAAP,GAClBb,IADkB,CACb,UAAAE,GAAG;AAAA,mBAAIA,GAAG,CAACY,IAAJ,GAAWN,MAAM,CAACO,KAAP,EAAX,GAA4BP,MAAM,CAACQ,KAAP,CAAad,GAAG,CAACe,KAAjB,EAAwBjB,IAAxB,CAA6BY,IAA7B,CAAhC;AAAA,WADU,CAAN;AAAA,SAAb;AAEH,OAvBD;AAwBD;;;6BACQ;AACPlB,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACA,aACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACM,oBAAC,gBAAD;AACI,QAAA,YAAY,EAAE,KAAKuB,MADvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADN,CADF;AAOD;;;;EAnDuCjC,S;;SAArBI,Y","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport DownloadTestForm from \"../components/LoginComponents/DownloadTestForm\";\nimport streamSaver from 'streamsaver';\n\n//로그인\nexport default class DownloadTest extends Component { //export default : 다른 모듈에서 이 모듈을 import할 때 내보낼 대표 값\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: \"\",\n      password: \"\",\n    };\n    console.log(\"다운로드 테스트.\");\n  }\n\n  //유저 로그인 상태 체크\n  componentDidMount() {\n\n  }\n\n  DLTest(){\n    const fileStream=streamSaver.createWriteStream('eng.pdf');\n    fetch('http://localhost/api/download/sunga201/eng.pdf', {\n        method: \"GET\"\n    })\n    .then(r=>{\n        console.log(r);\n        return r;\n    })\n    .then(res=>{\n        const readableStream=res.body;\n        console.log(\"start!!!\");\n        console.log('readableStream : ', readableStream);\n        console.log(window.WritableStream);\n        console.log(readableStream.pipeTo);\n        if(window.WritableStream && readableStream.pipeTo){\n            return readableStream.pipeTo(fileStream)\n            .then(()=>console.log(\"finish writing.\"));\n        }\n\n        const writer=fileStream.getWriter()\n        const reader=readableStream.getReader()\n        console.log('here.');\n        const pump = () => reader.read()\n        .then(res => res.done ? writer.close() : writer.write(res.value).then(pump))\n    })\n  }\n  render() {\n    console.log('download button render.');\n    return (\n      <Fragment>\n            <DownloadTestForm\n                downloadTest={this.DLTest}\n            />\n      </Fragment>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}